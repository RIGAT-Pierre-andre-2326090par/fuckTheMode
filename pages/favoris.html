<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Mes Favoris</title>
    <link href="../style/pages.css" rel="stylesheet">
    <link href="../style/theme.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<div class="sidebar" id="mySidebar">
    <a class="closebtn" href="javascript:void(0)" onclick="closeNav()">&times;</a>
    <a href="../index.html"><i class="fa-solid fa-house"></i> Accueil</a>
    <a href="compte.html"><i class="fa-regular fa-user"></i> Compte</a>
    <a href="favoris.html"><i class="fa-regular fa-heart"></i> Favoris</a>
    <a href="parametres.html"><i class="fa-solid fa-sliders"></i> Paramètres</a>
    <a href="contact.html"><i class="fa-solid fa-headset"></i> Contactez nous</a>
</div>
<header class="site-header">
    <div class="menu-icon" onclick="openNav()"><i class="fa-solid fa-bars"></i></div>
    <a class="logo" href="../index.html">FUCK THE MODE</a>
    <div class="cart-icon-container" onclick="window.location.href='panier.html'">
        <i class="fa-solid fa-basket-shopping"></i><span id="cart-count">0</span>
    </div>
</header>

<main class="page-container">
    <h1>Mes coups de cœur</h1>
    <div class="fav-grid" id="fav-grid"></div>
</main>

<script src="../js/data.js"></script>
<script src="../js/favorites.js"></script>
<script src="../js/cart.js"></script>
<script src="../js/theme.js"></script>
<script>
    const container = document.getElementById('fav-grid');
    let favorites = JSON.parse(localStorage.getItem('myFavorites')) || [];

    if (favorites.length === 0) {
        container.innerHTML = "<p class='empty-msg'>Vous n'avez aucun favori pour le moment.</p>";
    } else {
        favorites.forEach(id => {
            let product = productsDB[id];
            if (product) {
                container.innerHTML += `
                        <div class="fav-card">
                            <button class="remove-fav" onclick="removeFav(event, '${id}')"><i class="fa-sol${id} fa-trash"></i></button>
                            <a href="produit.html?id=id" style="text-decoration:none; color:inherit;">
                                <img src="${product.img}" alt="${product.title}">
                                <div class="fav-info"><h3 class="fav-title">${product.title}</h3><p class="fav-price">${product.price}</p></div>
                            </a>
                        </div>`;
            }
        });
    }

    function removeFav(event, id) {
        event.preventDefault();
        event.stopPropagation();
        let favs = JSON.parse(localStorage.getItem('myFavorites')) || [];
        favs = favs.filter(favId => favId !== id);
        localStorage.setItem('myFavorites', JSON.stringify(favs));
        location.reload();
    }
</script>
</body>
</html>